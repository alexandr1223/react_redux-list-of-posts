(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c,s=n(9),a=n.n(s),o=n(2),i=n(14),r=n(5),l=n(0),u=function(t,e){return fetch("".concat("https://mate.academy/students-api").concat(t),e).then((function(t){return t.json()}))};!function(t){t.SET_POSTS="SET_POSTS",t.SET_ACTIVE_POST="SET_ACTIVE_POST",t.SET_COMMENTS="SET_COMMETNS",t.DELETE_COMMENT="DELETE_COMMENT",t.SET_DETAILS="SET_DETAILS",t.ADD_COMMENT="ADD_COMMENT"}(c||(c={}));var j=function(t){return function(e){var n;(n=t,u("/comments",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:n.postId,name:n.name,email:n.email,body:n.body})})).then((function(){e({type:c.ADD_COMMENT,payload:{commentData:t}})}))}},b=function(t){return function(e){(function(t){return u("/comments/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}})})(t).then((function(){e({type:c.DELETE_COMMENT,payload:{commentId:t}})}))}},d=(n(23),n(1)),m=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.posts.postsList})),n=Object(o.c)((function(t){return t.posts.activePost})),s=function(e){var n;t((n=e,{type:c.SET_ACTIVE_POST,payload:{activePost:n}}))};return Object(d.jsxs)("div",{className:"PostsList",children:[Object(d.jsx)("h2",{children:"Posts:"}),Object(d.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.length>0&&e.map((function(t){return Object(d.jsxs)("li",{className:"PostsList__item",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("b",{children:"[User #".concat(t.id,"]: ")}),t.title]}),t.id===n?Object(d.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s(null)},children:"Close"}):Object(d.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s(t.id)},children:"Open"})]},t.id)}))})]})},O=(n(25),function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.posts.activePost})),n=Object(l.useState)(""),c=Object(r.a)(n,2),s=c[0],a=c[1],i=Object(l.useState)(""),u=Object(r.a)(i,2),b=u[0],m=u[1],O=Object(l.useState)(""),p=Object(r.a)(O,2),h=p[0],_=p[1];return Object(d.jsxs)("form",{className:"NewCommentForm",onSubmit:function(n){return function(n){n.preventDefault(),e&&(t(j({name:s,email:b,body:h,postId:e})),a(""),m(""),_(""))}(n)},children:[Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:s,onChange:function(t){return a(t.target.value)}})}),Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:b,onChange:function(t){return m(t.target.value)}})}),Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:h,onChange:function(t){return _(t.target.value)}})}),Object(d.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),p=(n(26),function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.posts.comments})),n=Object(o.c)((function(t){return t.posts.activePost})),s=Object(o.c)((function(t){return t.posts.details})),a=Object(l.useState)(!0),i=Object(r.a)(a,2),j=i[0],m=i[1];Object(l.useEffect)((function(){var e;n&&((e=n,u("/posts/".concat(e))).then((function(e){return t(function(t){return{type:c.SET_DETAILS,payload:{postDetails:t}}}(e))})),function(t){return u("/comments?postId=".concat(t))}(n).then((function(e){return t(function(t){return{type:c.SET_COMMENTS,payload:{comments:t}}}(e))})))}),[n]);return Object(d.jsx)("div",{className:"PostDetails",children:s&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Post details: ".concat(n)}),Object(d.jsx)("section",{className:"PostDetails__post",children:Object(d.jsx)("p",{children:s.title})}),e.length>0&&Object(d.jsxs)("section",{className:"PostDetails__comments",children:[Object(d.jsx)("button",{type:"button",className:"button",onClick:function(){return m(!j)},children:j?"Hide ".concat(e.length," comments"):"Show ".concat(e.length," comments")}),j&&Object(d.jsx)("ul",{className:"PostDetails__list","data-cy":"postDetails",children:e.map((function(e){return Object(d.jsxs)("li",{className:"PostDetails__list-item",children:[Object(d.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return function(e){t(b(e.id))}(e)},children:"X"}),Object(d.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(d.jsx)("section",{children:Object(d.jsx)("div",{className:"PostDetails__form-wrapper",children:n&&Object(d.jsx)(O,{})})})]})})}),h=(n(27),n(28),function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.posts.activePost})),n=Object(l.useState)(0),s=Object(r.a)(n,2),a=s[0],i=s[1];return Object(l.useEffect)((function(){var e;(e=a,u(0!==e?"/posts?userId=".concat(e):"/posts")).then((function(e){return t((n=e,{type:c.SET_POSTS,payload:{postsList:n}}));var n}))}),[a]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App__header",children:Object(d.jsxs)("label",{children:["Select a user: \xa0",Object(d.jsxs)("select",{className:"App__user-selector",value:a,onChange:function(t){return i(+t.target.value)},children:[Object(d.jsx)("option",{value:"0",children:"All users"}),Object(d.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(d.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(d.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(d.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(d.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(d.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(d.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(d.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(d.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(d.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(d.jsxs)("main",{className:"App__main",children:[Object(d.jsx)("div",{className:"App__sidebar",children:Object(d.jsx)(m,{})}),null!==e&&Object(d.jsx)("div",{className:"App__content",children:Object(d.jsx)(p,{})})]})]})}),_=n(7),f=n(13),E=n(15),x=n(4),T={postsList:[],activePost:null,comments:[],details:[]},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.SET_POSTS:return Object(x.a)(Object(x.a)({},t),{},{postsList:e.payload.postsList});case c.SET_ACTIVE_POST:return Object(x.a)(Object(x.a)({},t),{},{activePost:e.payload.activePost});case c.SET_COMMENTS:return Object(x.a)(Object(x.a)({},t),{},{comments:e.payload.comments});case c.DELETE_COMMENT:return Object(x.a)(Object(x.a)({},t),{},{comments:t.comments.filter((function(t){return t.id!==e.payload.commentId}))});case c.ADD_COMMENT:return Object(x.a)(Object(x.a)({},t),{},{comments:[].concat(Object(E.a)(t.comments),[e.payload.commentData])});case c.SET_DETAILS:return Object(x.a)(Object(x.a)({},t),{},{details:e.payload.postDetails});default:return t}},S=Object(_.b)({posts:v}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c,y=Object(_.d)(S,N(Object(_.a)(f.a))),C=function(){return Object(d.jsx)(o.a,{store:y,children:Object(d.jsx)(i.a,{children:Object(d.jsx)(h,{})})})};a.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.2f6d4b8a.chunk.js.map