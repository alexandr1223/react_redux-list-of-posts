(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var c,a=n(9),s=n.n(a),o=n(3),i=n(14),r=n(5),l=n(0),u=function(e){return e.posts.postsList},j=function(e){return e.posts.activePost},b=function(e){return e.posts.comments},d=function(e){return e.posts.details},O=function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){return e.json()}))};!function(e){e.SET_POSTS="SET_POSTS",e.SET_ACTIVE_POST="SET_ACTIVE_POST",e.SET_COMMENTS="SET_COMMETNS",e.DELETE_COMMENT="DELETE_COMMENT",e.SET_DETAILS="SET_DETAILS",e.ADD_COMMENT="ADD_COMMENT"}(c||(c={}));var m=function(e){return{type:c.SET_POSTS,payload:e}},p=function(e){return{type:c.SET_ACTIVE_POST,payload:e}},h=function(e){return{type:c.SET_DETAILS,payload:e}},f=function(e){return{type:c.SET_COMMENTS,payload:e}},_=function(e){return function(t){var n;(n=e,O("/comments",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:n.postId,name:n.name,email:n.email,body:n.body})})).then((function(){t({type:c.ADD_COMMENT,payload:e})}))}},E=function(e){return function(t){(function(e){return O("/comments/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}})})(e).then((function(){t({type:c.DELETE_COMMENT,payload:e})}))}},x=(n(23),n(1)),T=function(){var e=Object(o.b)(),t=Object(o.c)(u),n=Object(o.c)(j),c=function(t){e(p(t))};return Object(x.jsxs)("div",{className:"PostsList",children:[Object(x.jsx)("h2",{children:"Posts:"}),Object(x.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:t.length>0&&t.map((function(e){return Object(x.jsxs)("li",{className:"PostsList__item",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"[User #".concat(e.id,"]: ")}),e.title]}),e.id===n?Object(x.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(null)},children:"Close"}):Object(x.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(e.id)},children:"Open"})]},e.id)}))})]})},v=n(2),N=(n(25),function(){var e=Object(o.b)(),t=Object(o.c)(j),n=Object(l.useState)({nameValue:"",emailValue:"",bodyValue:""}),c=Object(r.a)(n,2),a=c[0],s=c[1];return Object(x.jsxs)("form",{className:"NewCommentForm",onSubmit:function(n){return function(n){if(n.preventDefault(),t){var c={name:a.nameValue,email:a.emailValue,body:a.bodyValue,postId:t};e(_(c)),s({nameValue:"",emailValue:"",bodyValue:""})}}(n)},children:[Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:a.nameValue,onChange:function(e){return t=e.target.value,void s((function(e){return Object(v.a)(Object(v.a)({},e),{},{nameValue:t})}));var t}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:a.emailValue,onChange:function(e){return t=e.target.value,void s((function(e){return Object(v.a)(Object(v.a)({},e),{},{emailValue:t})}));var t}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:a.bodyValue,onChange:function(e){return t=e.target.value,void s((function(e){return Object(v.a)(Object(v.a)({},e),{},{bodyValue:t})}));var t}})}),Object(x.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),S=(n(26),function(){var e=Object(o.b)(),t=Object(o.c)(b),n=Object(o.c)(j),c=Object(o.c)(d),a=Object(l.useState)(!0),s=Object(r.a)(a,2),i=s[0],u=s[1];Object(l.useEffect)((function(){var t;n&&((t=n,O("/posts/".concat(t))).then((function(t){return e(h(t))})),function(e){return O("/comments?postId=".concat(e))}(n).then((function(t){return e(f(t))})))}),[n]);return Object(x.jsx)("div",{className:"PostDetails",children:c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Post details: ".concat(n)}),Object(x.jsx)("section",{className:"PostDetails__post",children:Object(x.jsx)("p",{children:c.title})}),t.length>0&&Object(x.jsxs)("section",{className:"PostDetails__comments",children:[Object(x.jsx)("button",{type:"button",className:"button",onClick:function(){return u(!i)},children:i?"Hide ".concat(t.length," comments"):"Show ".concat(t.length," comments")}),i&&Object(x.jsx)("ul",{className:"PostDetails__list","data-cy":"postDetails",children:t.map((function(t){return Object(x.jsxs)("li",{className:"PostDetails__list-item",children:[Object(x.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return function(t){e(E(t.id))}(t)},children:"X"}),Object(x.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(x.jsx)("section",{children:Object(x.jsx)("div",{className:"PostDetails__form-wrapper",children:n&&Object(x.jsx)(N,{})})})]})})}),y=(n(27),n(28),function(){var e=Object(o.b)(),t=Object(o.c)(j),n=Object(l.useState)(0),c=Object(r.a)(n,2),a=c[0],s=c[1];return Object(l.useEffect)((function(){var t;(t=a,O(0!==t?"/posts?userId=".concat(t):"/posts")).then((function(t){return e(m(t))}))}),[a]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{className:"App__header",children:Object(x.jsxs)("label",{children:["Select a user: \xa0",Object(x.jsxs)("select",{className:"App__user-selector",value:a,onChange:function(e){return s(+e.target.value)},children:[Object(x.jsx)("option",{value:"0",children:"All users"}),Object(x.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(x.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(x.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(x.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(x.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(x.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(x.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(x.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(x.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(x.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(x.jsxs)("main",{className:"App__main",children:[Object(x.jsx)("div",{className:"App__sidebar",children:Object(x.jsx)(T,{})}),null!==t&&Object(x.jsx)("div",{className:"App__content",children:Object(x.jsx)(S,{})})]})]})}),C=n(7),D=n(13),P=n(15),M={postsList:[],activePost:null,comments:[],details:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.SET_POSTS:return Object(v.a)(Object(v.a)({},e),{},{postsList:t.payload});case c.SET_ACTIVE_POST:return Object(v.a)(Object(v.a)({},e),{},{activePost:t.payload});case c.SET_COMMENTS:return Object(v.a)(Object(v.a)({},e),{},{comments:t.payload});case c.DELETE_COMMENT:return Object(v.a)(Object(v.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.payload}))});case c.ADD_COMMENT:return Object(v.a)(Object(v.a)({},e),{},{comments:[].concat(Object(P.a)(e.comments),[t.payload])});case c.SET_DETAILS:return Object(v.a)(Object(v.a)({},e),{},{details:t.payload});default:return e}},V=Object(C.b)({posts:L}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.c,g=Object(C.d)(V,A(Object(C.a)(D.a))),I=function(){return Object(x.jsx)(o.a,{store:g,children:Object(x.jsx)(i.a,{children:Object(x.jsx)(y,{})})})};s.a.render(Object(x.jsx)(I,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.57753805.chunk.js.map