(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c,s=n(9),a=n.n(s),o=n(2),i=n(14),r=n(5),l=n(0),u=function(t){return t.posts.postsList},j=function(t){return t.posts.activePost},b=function(t){return t.posts.comments},d=function(t){return t.posts.details},O=function(t,e){return fetch("".concat("https://mate.academy/students-api").concat(t),e).then((function(t){return t.json()}))};!function(t){t.SET_POSTS="SET_POSTS",t.SET_ACTIVE_POST="SET_ACTIVE_POST",t.SET_COMMENTS="SET_COMMETNS",t.DELETE_COMMENT="DELETE_COMMENT",t.SET_DETAILS="SET_DETAILS",t.ADD_COMMENT="ADD_COMMENT"}(c||(c={}));var m=function(t){return{type:c.SET_POSTS,payload:t}},p=function(t){return{type:c.SET_ACTIVE_POST,payload:t}},h=function(t){return{type:c.SET_DETAILS,payload:t}},_=function(t){return{type:c.SET_COMMENTS,payload:t}},f=function(t){return function(e){var n;(n=t,O("/comments",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:n.postId,name:n.name,email:n.email,body:n.body})})).then((function(){e({type:c.ADD_COMMENT,payload:t})}))}},E=function(t){return function(e){(function(t){return O("/comments/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}})})(t).then((function(){e({type:c.DELETE_COMMENT,payload:t})}))}},x=(n(23),n(1)),T=function(){var t=Object(o.b)(),e=Object(o.c)(u),n=Object(o.c)(j),c=function(e){t(p(e))};return Object(x.jsxs)("div",{className:"PostsList",children:[Object(x.jsx)("h2",{children:"Posts:"}),Object(x.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.length>0&&e.map((function(t){return Object(x.jsxs)("li",{className:"PostsList__item",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"[User #".concat(t.id,"]: ")}),t.title]}),t.id===n?Object(x.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(null)},children:"Close"}):Object(x.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(t.id)},children:"Open"})]},t.id)}))})]})},S=(n(25),function(){var t=Object(o.b)(),e=Object(o.c)(j),n=Object(l.useState)(""),c=Object(r.a)(n,2),s=c[0],a=c[1],i=Object(l.useState)(""),u=Object(r.a)(i,2),b=u[0],d=u[1],O=Object(l.useState)(""),m=Object(r.a)(O,2),p=m[0],h=m[1];return Object(x.jsxs)("form",{className:"NewCommentForm",onSubmit:function(n){return function(n){n.preventDefault(),e&&(t(f({name:s,email:b,body:p,postId:e})),a(""),d(""),h(""))}(n)},children:[Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:s,onChange:function(t){return a(t.target.value)}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:b,onChange:function(t){return d(t.target.value)}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:p,onChange:function(t){return h(t.target.value)}})}),Object(x.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),N=(n(26),function(){var t=Object(o.b)(),e=Object(o.c)(b),n=Object(o.c)(j),c=Object(o.c)(d),s=Object(l.useState)(!0),a=Object(r.a)(s,2),i=a[0],u=a[1];Object(l.useEffect)((function(){var e;n&&((e=n,O("/posts/".concat(e))).then((function(e){return t(h(e))})),function(t){return O("/comments?postId=".concat(t))}(n).then((function(e){return t(_(e))})))}),[n]);return Object(x.jsx)("div",{className:"PostDetails",children:c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Post details: ".concat(n)}),Object(x.jsx)("section",{className:"PostDetails__post",children:Object(x.jsx)("p",{children:c.title})}),e.length>0&&Object(x.jsxs)("section",{className:"PostDetails__comments",children:[Object(x.jsx)("button",{type:"button",className:"button",onClick:function(){return u(!i)},children:i?"Hide ".concat(e.length," comments"):"Show ".concat(e.length," comments")}),i&&Object(x.jsx)("ul",{className:"PostDetails__list","data-cy":"postDetails",children:e.map((function(e){return Object(x.jsxs)("li",{className:"PostDetails__list-item",children:[Object(x.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return function(e){t(E(e.id))}(e)},children:"X"}),Object(x.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(x.jsx)("section",{children:Object(x.jsx)("div",{className:"PostDetails__form-wrapper",children:n&&Object(x.jsx)(S,{})})})]})})}),v=(n(27),n(28),function(){var t=Object(o.b)(),e=Object(o.c)(j),n=Object(l.useState)(0),c=Object(r.a)(n,2),s=c[0],a=c[1];return Object(l.useEffect)((function(){var e;(e=s,O(0!==e?"/posts?userId=".concat(e):"/posts")).then((function(e){return t(m(e))}))}),[s]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{className:"App__header",children:Object(x.jsxs)("label",{children:["Select a user: \xa0",Object(x.jsxs)("select",{className:"App__user-selector",value:s,onChange:function(t){return a(+t.target.value)},children:[Object(x.jsx)("option",{value:"0",children:"All users"}),Object(x.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(x.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(x.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(x.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(x.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(x.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(x.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(x.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(x.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(x.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(x.jsxs)("main",{className:"App__main",children:[Object(x.jsx)("div",{className:"App__sidebar",children:Object(x.jsx)(T,{})}),null!==e&&Object(x.jsx)("div",{className:"App__content",children:Object(x.jsx)(N,{})})]})]})}),y=n(7),C=n(13),D=n(15),P=n(4),M={postsList:[],activePost:null,comments:[],details:[]},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.SET_POSTS:return Object(P.a)(Object(P.a)({},t),{},{postsList:e.payload});case c.SET_ACTIVE_POST:return Object(P.a)(Object(P.a)({},t),{},{activePost:e.payload});case c.SET_COMMENTS:return Object(P.a)(Object(P.a)({},t),{},{comments:e.payload});case c.DELETE_COMMENT:return Object(P.a)(Object(P.a)({},t),{},{comments:t.comments.filter((function(t){return t.id!==e.payload}))});case c.ADD_COMMENT:return Object(P.a)(Object(P.a)({},t),{},{comments:[].concat(Object(D.a)(t.comments),[e.payload])});case c.SET_DETAILS:return Object(P.a)(Object(P.a)({},t),{},{details:e.payload});default:return t}},A=Object(y.b)({posts:L}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||y.c,I=Object(y.d)(A,g(Object(y.a)(C.a))),w=function(){return Object(x.jsx)(o.a,{store:I,children:Object(x.jsx)(i.a,{children:Object(x.jsx)(v,{})})})};a.a.render(Object(x.jsx)(w,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d12e655a.chunk.js.map